<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	th:replace="~{fragments/defaultLayout :: defaultLayout (~{::body},'users')}">
<head>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>Update User</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet"
	href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
	integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
	crossorigin="anonymous">
<link rel="stylesheet"
	href="https://use.fontawesome.com/releases/v5.4.1/css/all.css"
	integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz"
	crossorigin="anonymous">
<link rel="stylesheet" href="../css/shards.min.css">
</head>
<body>
	<div class="container my-5">
		<h2 class="mb-5">Update User</h2>
		<div class="row">
			<!-- form start -->
			<div class="col-md-6">
				<form action="#" th:action="@{/update/{id}(id=${user.id})}"
					th:object="${user}" method="post">
					<div class="row">
						<div class="form-group col-md-6">
							<label for="name" class="col-form-label">Name</label> <input
								type="text" th:field="*{name}" class="form-control" id="name"
								placeholder="Name"> <span
								th:if="${#fields.hasErrors('name')}" th:errors="*{name}"
								class="text-danger"></span>
						</div>
						<div class="form-group col-md-6">
							<label for="email" class="col-form-label">Email</label> <input
								type="text" th:field="*{email}" class="form-control" id="email"
								placeholder="Email"> <span
								th:if="${#fields.hasErrors('email')}" th:errors="*{email}"
								class="text-danger"></span>
						</div>
						<div class="form-group col-md-6">
							<label for="age" class="col-form-label">Age</label> <input
								type="text" th:field="*{age}" class="form-control" id="age"
								placeholder="Age"> <span
								th:if="${#fields.hasErrors('age')}" th:errors="*{age}"
								class="text-danger"></span>
						</div>
						<div class="form-group col-md-6">
							<label for="gender" class="col-form-label">Gender</label> <select
								class="form-control" id="gender" th:field="*{gender}">
								<option th:each="gender : ${T(com.model.User.GENDER).values()}"
									th:value="${gender}" th:text="${gender}"></option>
							</select>
						</div>
						<div class="form-group col-md-6">
							<label for="country" class="col-form-label">Country</label> <input
								type="text" th:field="*{country}" class="form-control"
								id="country" placeholder="Country"> <span
								th:if="${#fields.hasErrors('country')}" th:errors="*{country}"
								class="text-danger"></span>
						</div>
						<div class="form-group col-md-6">
							<label for="mobile" class="col-form-label">Mobile</label> <input
								type="text" th:field="*{mobile}" class="form-control"
								id="mobile" placeholder="Mobile"> <span
								th:if="${#fields.hasErrors('mobile')}" th:errors="*{mobile}"
								class="text-danger"></span>
						</div>
						<div class="form-group col-md-6">
							<label for="contact" class="col-form-label">Contact</label> <input
								type="text" th:field="*{contact}" class="form-control"
								id="contact" placeholder="Contact"> <span
								th:if="${#fields.hasErrors('contact')}" th:errors="*{contact}"
								class="text-danger"></span>
						</div>
						<!-- formFields: messageText -->
						<div class="form-group col-md-12">
							<label>Feedback:</label>
							<textarea id="input" class="comment form-control" rows="5"
								maxlength="200" onkeyup="DiaplyNumberOfCharacterLeft()"></textarea>
							<small id="output" class="textarea-feedback"></small>
						</div>
					</div>
					<div class="row">
						<div class="col-md-6 mt-5">
							<input type="submit" class="btn btn-primary" value="Update User">
						</div>
					</div>
				</form>
			</div>
		</div>

	</div>


	<script>
	 	// function to display the max character limit and 
	 	// how many characters left
		var inputMax = document.getElementById("input").maxLength;
		var output = document.getElementById("output");
		
		output.innerHTML = `${inputMax} Character limit`;

		function DiaplyNumberOfCharacterLeft() {
			var input = document.getElementById("input");
			var textLength = input.value.length;
			
			output.innerHTML = `${textLength} Character limit`;
			
			
			var textRemaining = inputMax - textLength;
			if (textRemaining === 1) {
				output.innerHTML = `${textRemaining} Character limit`;
			} else {
				output.innerHTML = `${textRemaining} Characters left`;
			}
		}
	</script>

</body>
</html>